import document from"document";import*as saveManager from"./save.js";import*as screenManager from"./screen.js";export function loadResults(e){var t=saveManager.loadState(),a=saveManager.loadTrainers(),s=a[t.lastBattle.OpponentIndex],n=!1,d=Math.round((Math.random()*(.85-1.15)+1.15)*s.battleSteps);if(document.getElementById("br-pwin").style.display="none",e>d&&(n=!0,document.getElementById("br-pwin").style.display="inline",document.getElementById("br-twin").style.display="none"),n)switch(t.wins++,s.losses++,t.lastBattle.OpponentIndex){case 13:t.defeatedGyms[0]=!0;break;case 14:t.defeatedGyms[1]=!0;break;case 15:t.defeatedGyms[2]=!0;break;case 16:t.defeatedGyms[3]=!0;break;case 17:t.defeatedGyms[4]=!0;break;case 18:t.defeatedGyms[5]=!0;break;case 19:t.defeatedGyms[6]=!0;break;case 20:t.defeatedGyms[7]=!0;break;case 21:t.defeatedElites[0]=!0;break;case 22:t.defeatedElites[1]=!0;break;case 23:t.defeatedElites[2]=!0;break;case 24:t.defeatedElites[3]=!0;break;case 25:t.defeatedElites[4]=!0}else t.losses++,s.wins++;t.highestSteps<e&&(t.highestSteps=e),t.lastBattle={InBattle:!1,BattleStart:null,BattleEnd:null,OpponentIndex:100},saveManager.saveState(t),saveManager.saveTrainers(a),document.getElementById("br-pi").href="images/trainers/"+t.name+".png",document.getElementById("br-ppi").href="images/trainers/"+t.name+"p.png",document.getElementById("br-pname").text=t.name,document.getElementById("br-psteps").text=e+" steps",document.getElementById("br-ti").href="images/trainers/"+s.id+".png",document.getElementById("br-tpi").href="images/trainers/"+s.id+"p.png",document.getElementById("br-tname").text=s.name,document.getElementById("br-tsteps").text=d+" steps",document.getElementById("br-home").onactivate=function(){screenManager.showHome()}};